"use strict";(self.webpackChunk_react_middle=self.webpackChunk_react_middle||[]).push([[274],{274:(e,n,t)=>{t.r(n),t.d(n,{default:()=>A});var r=t(893),o=t(294),a=t(72),i=t(611),l=t(284);const s="esMZ56JO";var u=function(){return u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},u.apply(this,arguments)},c=function(e){var n=e.value,t=e.onChange,a=e.type,l=void 0===a?"text":a,s=e.placeholder,c=e.className,d=e.autoFocus,f=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["value","onChange","type","placeholder","className","autoFocus"]),p=(0,o.useState)(!1),v=p[0],h=p[1],m=(0,o.useState)(0),y=m[0],g=m[1],b=(0,o.useRef)(null);return(0,o.useEffect)((function(){var e;d&&(h(!0),null===(e=null==b?void 0:b.current)||void 0===e||e.focus())}),[d]),(0,r.jsxs)("div",u({className:(0,i.A)("LuFDUWoP",{},[c])},{children:[s&&(0,r.jsx)("div",u({className:"emAQQ85i"},{children:"".concat(s,">")})),(0,r.jsxs)("div",u({className:"yiPASP1v"},{children:[(0,r.jsx)("input",u({className:"LVdIPwcx",ref:b,onChange:function(e){var n=e.target.value;null==t||t(n),g(n.length)},type:l,value:n,onFocus:function(){h(!0)},onBlur:function(){h(!1)},onSelect:function(e){var n;g((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)}},f)),v&&(0,r.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(9*y,"px")}})]}))]}))},d=t(333),f=t(162),p=t(257),v=t(316),h=t(268),m=t(335),y=(0,f.hg)("login/loginByUsername",(function(e,n){return t=void 0,r=void 0,a=function(){var t;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(i=0)),i;)try{if(t=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],r=0}finally{t=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,p.Z.post("http://localhost:8000/login",e)];case 1:if(!(t=r.sent()).data)throw new Error;return localStorage.setItem(m.z,JSON.stringify(t.data)),n.dispatch(v.hI.setAuthData(t.data)),[2,t.data];case 2:return r.sent(),[2,n.rejectWithValue(h.Z.t("Вы ввели неверные данные"))];case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function i(e){try{s(a.next(e))}catch(e){n(e)}}function l(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}s((a=a.apply(t,r||[])).next())}));var t,r,o,a})),g=(0,f.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:function(e,n){e.username=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(y.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(y.fulfilled,(function(e,n){e.isLoading=!1})).addCase(y.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),b=g.reducer,x=g.actions;const w={title:"ikI7VPeL",text:"uNJeeCm1",error:"F9oLXAK4"};var j,O=function(){return O=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},O.apply(this,arguments)};!function(e){e.PRIMARY="primary",e.ERROR="error"}(j||(j={}));var N=function(e){var n=e.className,t=e.title,o=e.text,a=e.theme,l=void 0===a?j.PRIMARY:a;return(0,r.jsxs)("div",O({className:(0,i.A)(w.Text,{},[n,w[l]])},{children:[t&&(0,r.jsx)("p",O({className:w.title},{children:t})),o&&(0,r.jsx)("p",O({className:w.text},{children:o}))]}))},P=t(7),C=function(e){var n,t;return null!==(t=null===(n=e.loginForm)||void 0===n?void 0:n.username)&&void 0!==t?t:""},F=function(e){var n;return null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.error},R=function(e){var n,t;return null!==(t=null===(n=e.loginForm)||void 0===n?void 0:n.password)&&void 0!==t?t:""},S=function(e){var n,t;return null!==(t=null===(n=e.loginForm)||void 0===n?void 0:n.isLoading)&&void 0!==t&&t},L=function(){return L=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},L.apply(this,arguments)};const A=function(){var e=(0,a.$G)().t,n=(0,d.T)(),t=(0,P.oR)(),u=(0,d.C)(C),f=(0,d.C)(R),p=(0,d.C)(F),v=(0,d.C)(S);return(0,o.useEffect)((function(){return t.reducerManager.add("loginForm",b),function(){t.reducerManager.remove("loginForm")}}),[]),(0,r.jsxs)("form",L({className:(0,i.A)("QxFAuUm7"),onSubmit:function(e){e.preventDefault(),n(y({username:u,password:f}))}},{children:[(0,r.jsx)(N,{title:e("Форма авторизации")}),p&&(0,r.jsx)(N,{text:p,theme:j.ERROR}),(0,r.jsx)(c,{type:"text",autoFocus:!0,placeholder:e("Введите username"),className:s,onChange:function(e){n(x.setUsername(e))},value:u}),(0,r.jsx)(c,{type:"text",placeholder:e("Введите пароль"),className:s,onChange:function(e){n(x.setPassword(e))},value:f}),(0,r.jsx)(l.z,L({type:"submit",theme:l.b.OUTLINE,className:"UWNB6xrV",disabled:v},{children:e("Войти")}))]}))}}}]);